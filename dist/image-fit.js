!function(e,i){"object"==typeof exports&&"object"==typeof module?module.exports=i():"function"==typeof define&&define.amd?define([],i):"object"==typeof exports?exports.imageFit=i():e.imageFit=i()}(this,function(){return function(e){"use strict";var i=[],t=void 0!==e,n=void 0!==window.document.createElement("div").style.objectFit,r={container:function(){for(var e,i=this.parentNode;9!==i.nodeType;){if((" "+i.className+" ").indexOf(" image-fit-container ")>-1){e=i;break}i=i.parentNode}return e},objectFit:!0,useMargins:!1,resize:!0,checkOnResize:!1,onPreLoad:function(){},onCheck:function(){},onSet:function(){}},o=function(e){var i=[],t=0;if(void 0!==e&&null!==e)if(void 0===e.length)i.push(e);else if(e.length)for(t=0;t<e.length;t+=1)i.push(e[t]);return i},c=function(e,i){"function"==typeof e&&e.call(i)},a=function(){var e,i,t=arguments,n={},r=0;for(r=0;r<t.length;r+=1){e=t[r];for(i in e)e.hasOwnProperty(i)&&(n[i]=e[i])}return n},f=function(e,i){for(var t=" "+e.className+" ",n=i.split(" "),r="",o=0;o<n.length;o+=1)-1===t.indexOf(" "+n[o]+" ")&&""!==n[o]&&(r+=" "+n[o]);e.className+=r},s=function(e,i){for(var t=" "+e.className+" ",n=i.split(" "),r=0;r<n.length;r+=1)t=t.replace(" "+n[r]+" "," ");e.className=t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},u={resize:{timer:void 0,bind:function(e,t){e.resize&&t&&i.push(e)},check:function(e){e.checkOnResize?u.run(e,!1):u.checkAndSet(e)},run:function(){i.length&&(u.resize.timer&&clearTimeout(u.resize.timer),u.resize.timer=setTimeout(function(){for(var e=0;e<i.length;e+=1)u.resize.check(i[e])},100))}},checkAndSet:function(e){s(e.img,"fitted-tall fitted-wide"),c(e.onCheck,e.img);var i=e.img.clientHeight/e.img.clientWidth*100<e.container.clientHeight/e.container.clientWidth*100?"fitted-tall":"fitted-wide";f(e.img,"fitted "+i),e.useMargins&&(f(e.img,"fitted-margins"),"fitted-tall"===i?(e.img.style.marginLeft=-e.img.clientWidth/2+"px",e.img.style.marginTop=""):(e.img.style.marginLeft="",e.img.style.marginTop=-e.img.clientHeight/2+"px")),c(e.onSet,e.img)},run:function(e,i){var t=new Image;if(c(e.onPreLoad,e.img),e.objectFit&&n)return f(e.img,"fitted fitted-object-fit"),void(e.checkOnResize&&u.resize.bind(e,i));t.onload=function(){u.checkAndSet(e),u.resize.bind(e,i)},t.onerror=function(){f(e.img,"fitted-error")},t.src=e.img.currentSrc||e.img.src},prep:function(e){"function"==typeof e.container&&(e.container=e.container.call(e.img)),e.container=o(e.container),e.container.length&&(e.container=e.container[0],e.img.imageFitData=e,u.run(e,!0))},init:function(e,i){var t=0,n="string"==typeof i&&"update"===i;for(e=o(e),t=0;t<e.length;t+=1)n&&void 0!==e[t].imageFitData?u.run(e[t].imageFitData,!1):u.prep(a(r,i,{img:e[t]}))}};return void 0!==window.addEventListener?window.addEventListener("resize",u.resize.run):window.attachEvent("onresize",u.resize.run),t&&(e.fn.imageFit=function(e){return u.init(this,e),this}),function(e,i){u.init(e,i)}}(window&&window.jQuery)});