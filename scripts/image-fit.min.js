window.imageFit=window.imageFit||new function(e){"use strict";var t=[],i="undefined"!=typeof e,n="undefined"!=typeof window.document.createElement("div").style.objectFit,a={container:function(){for(var t,e=this.parentNode;9!==e.nodeType;){if((" "+e.className+" ").indexOf(" image-fit-container ")>-1){t=e;break}e=e.parentNode}return t},objectFit:!0,useMargins:!1,resize:!0,checkOnResize:!1,onPreLoad:function(){},onCheck:function(){},onSet:function(){}},o={handleElems:function(e){var t=[],i=0;if("undefined"!=typeof e&&null!==e)if("undefined"==typeof e.length)t.push(e);else if(e.length)for(i=0;i<e.length;i+=1)t.push(e[i]);return t},checkCallback:function(e,t){"function"==typeof e&&e.call(t)},merge:function(){var n,a,e=arguments,t={},i=0;for(i=0;i<e.length;i+=1){n=e[i];for(a in n)n.hasOwnProperty(a)&&(t[a]=n[a])}return t},addClass:function(e,t){var i=" "+e.className+" ",n=t.split(" "),a="",o=0;for(o;o<n.length;o+=1)-1===i.indexOf(" "+n[o]+" ")&&""!==n[o]&&(a+=" "+n[o]);e.className+=a},removeClass:function(e,t){var i=" "+e.className+" ",n=t.split(" "),a=0;for(a;a<n.length;a+=1)i=i.replace(" "+n[a]+" "," ");e.className=i.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},r={resize:{timer:void 0,bind:function(e,i){e.resize&&i&&t.push(e)},check:function(e){e.checkOnResize?r.run(e,!1):r.checkAndSet(e)},run:function(){t.length&&(r.resize.timer&&clearTimeout(r.resize.timer),r.resize.timer=setTimeout(function(){var e=0;for(e;e<t.length;e+=1)r.resize.check(t[e])},100))}},checkAndSet:function(e){o.removeClass(e.img,"fitted-tall fitted-wide"),o.checkCallback(e.onCheck,e.img);var t=e.img.clientHeight/e.img.clientWidth*100,i=e.container.clientHeight/e.container.clientWidth*100,n=i>t?"fitted-tall":"fitted-wide";o.addClass(e.img,"fitted "+n),e.useMargins&&(o.addClass(e.img,"fitted-margins"),"fitted-tall"===n?(e.img.style.marginLeft=-(e.img.clientWidth/2)+"px",e.img.style.marginTop=""):(e.img.style.marginLeft="",e.img.style.marginTop=-(e.img.clientHeight/2)+"px")),o.checkCallback(e.onSet,e.img)},run:function(e,t){var i=new Image;return o.checkCallback(e.onPreLoad,e.img),e.objectFit&&n?(o.addClass(e.img,"fitted fitted-object-fit"),void(e.checkOnResize&&r.resize.bind(e,t))):(i.onload=function(){r.checkAndSet(e),r.resize.bind(e,t)},i.onerror=function(){o.addClass(e.img,"fitted-error")},void(i.src=e.img.currentSrc||e.img.src))},prep:function(e){"function"==typeof e.container&&(e.container=e.container.call(e.img)),e.container=o.handleElems(e.container),e.container.length&&(e.container=e.container[0],e.img.imageFitData=e,r.run(e,!0))},init:function(e,t){var i=0,n="string"==typeof t&&"update"===t;for(e=o.handleElems(e),i=0;i<e.length;i+=1)n&&"undefined"!=typeof e[i].imageFitData?r.run(e[i].imageFitData,!1):r.prep(o.merge(a,t,{img:e[i]}))}};return"undefined"!=typeof window.addEventListener?window.addEventListener("resize",r.resize.run):window.attachEvent("onresize",r.resize.run),i&&(e.fn.imageFit=function(e){return r.init(this,e),this}),function(e,t){r.init(e,t)}}(window.jQuery);