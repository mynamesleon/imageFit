window.imageFit=window.imageFit||new function(e){"use strict";var i=[],n="undefined"!=typeof e,t="undefined"!=typeof window.document.createElement("div").style.objectFit,r={container:function(){for(var i,e=this;9!==e.nodeType;)if(e=e.parentNode,(" "+e.className+" ").indexOf(" image-fit-container ")>-1){i=e;break}return i},objectFit:!0,useMargins:!1,resize:!0,checkOnResize:!1,onPreLoad:function(){},onCheck:function(){},onSet:function(){}},c={isUndefinedElem:function(e){return"undefined"==typeof e||null===e||0===e.length},checkCallback:function(e,i){"function"==typeof e&&e.call(i)},merge:function(){var t,r,e=arguments,i={},n=0;for(n=0;n<e.length;n+=1){t=e[n];for(r in t)t.hasOwnProperty(r)&&(i[r]=t[r])}return i},addClass:function(e,i){var n=" "+e.className+" ",t=i.split(" "),r="",c=0;for(c;c<t.length;c+=1)-1===n.indexOf(" "+t[c]+" ")&&""!==t[c]&&(r+=" "+t[c]);e.className+=r},removeClass:function(e,i){var n=" "+e.className+" ",t=i.split(" "),r=0;for(r;r<t.length;r+=1)n=n.replace(" "+t[r]+" "," ");e.className=n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},a={resize:{timer:void 0,bind:function(e,n){e.resize&&n&&i.push(e)},check:function(e){e.checkOnResize?a.run(e,!1):a.checkAndSet(e)},run:function(){i.length&&(a.resize.timer&&clearTimeout(a.resize.timer),a.resize.timer=setTimeout(function(){var e=0;for(e;e<i.length;e+=1)a.resize.check(i[e])},100))}},checkAndSet:function(e){c.removeClass(e.img,"fitted-tall fitted-wide"),c.checkCallback(e.onCheck,e.img);var i=e.img.clientHeight/e.img.clientWidth*100,n=e.container.clientHeight/e.container.clientWidth*100,t=n>i?"fitted-tall":"fitted-wide";c.addClass(e.img,"fitted "+t),e.useMargins&&(c.addClass(e.img,"fitted-margins"),"fitted-tall"===t?(e.img.style.marginLeft=-(e.img.clientWidth/2)+"px",e.img.style.marginTop=""):(e.img.style.marginLeft="",e.img.style.marginTop=-(e.img.clientHeight/2)+"px")),c.checkCallback(e.onSet,e.img)},run:function(e,i){var n=new Image;return c.checkCallback(e.onPreLoad,e.img),e.objectFit&&t?(c.addClass(e.img,"fitted fitted-object-fit"),void(e.checkOnResize&&a.resize.bind(e,i))):(n.onload=function(){a.checkAndSet(e),a.resize.bind(e,i)},n.onerror=function(){c.addClass(e.img,"fitted-error")},void(n.src=e.img.currentSrc||e.img.src))},prep:function(e){"function"==typeof e.container&&(e.container=e.container.call(e.img)),c.isUndefinedElem(e.container)||(e.container.length&&(e.container=e.container[0]),a.run(c.merge(r,e),!0))},init:function(e,i){var n=0;if(!c.isUndefinedElem(e))if(e.length)for(n=0;n<e.length;n+=1)a.prep(c.merge(r,i,{img:e[n]}));else a.prep(c.merge(r,i,{img:e}))}};return"undefined"!=typeof window.addEventListener?window.addEventListener("resize",a.resize.run):window.attachEvent("onresize",a.resize.run),n&&(e.fn.imageFit=function(e){return a.init(this,e),this}),function(e,i){a.init(e,i)}}(window.jQuery);